<div class="container py-5">
  <div class="mb-4">
    <%= link_to admin_root_path, class: "text-decoration-none text-muted small" do %>
      <i class="bi bi-arrow-left"></i> Retour au Dashboard
    <% end %>
    <h2 class="fw-bold mt-2">Gestion des Utilisateurs</h2>
  </div>

  <div class="card border-0 shadow-sm overflow-hidden">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="bg-light text-muted small text-uppercase">
          <tr>
            <th class="px-4 py-3">Utilisateur</th>
            <th>Rôle</th>
            <th>Inscription</th>
            <th class="text-end px-4">Actions</th>
          </tr>
        </thead>
        <tbody>
          <% @users.each do |user| %>
            <tr class="<%= 'table-primary' if user == current_user %>">
              <td class="px-4">
                <div class="d-flex align-items-center">
                  <div class="fw-bold"><%= user.email %></div>
                  <% if user == current_user %>
                    <span class="badge bg-primary ms-2">Vous</span>
                  <% end %>
                </div>
              </td>
              <td>
                <% if user.is_admin %>
                  <span class="badge bg-dark text-white">Admin</span>
                <% else %>
                  <span class="badge bg-secondary text-white">Membre</span>
                <% end %>
              </td>
              <td><%= user.created_at.strftime("%d/%m/%Y") %></td>
              <td class="text-end px-4">
                <% unless user == current_user %>
                  <%= button_to "Bannir", admin_user_path(user), method: :delete, 
                      form: { data: { turbo_confirm: "Êtes-vous sûr de vouloir supprimer cet utilisateur ?" } }, 
                      class: "btn btn-sm btn-outline-danger" %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>